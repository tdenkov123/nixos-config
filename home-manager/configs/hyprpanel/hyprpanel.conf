[general]
layer = top
position = top
height = 33
margin-top = 0
margin-bottom = 0
margin-left = 0
margin-right = 0

[module/workspaces]
type = workspaces
format = {name}
format-icons = {
    "1" = "1",
    "2" = "2", 
    "3" = "3",
    "4" = "4",
    "5" = "5",
    "6" = "6",
    "7" = "7",
    "8" = "8",
    "magic" = "M"
}
persistent-workspaces = 8
disable-scroll = true
show-special = true
special-visible-only = true
all-outputs = false

[module/cpu]
type = custom/script
exec = echo "Ôãõ $(awk -F: '/cpu MHz/ {sum+=$2; n++} END { if (n) printf(\"%.1f GHz\", sum/n/1000) }' /proc/cpuinfo)"
interval = 3
tooltip = false

[module/cpu-usage]
type = custom/script
exec = echo "Ôãõ $(top -bn1 | grep "Cpu(s)" | sed "s/.*, *\([0-9.]*\)%* id.*/\1/" | awk '{print 100 - $1"%"}')"
interval = 5
tooltip = true

[module/memory]
type = custom/script
exec = echo "Ôî∏ $(free -h | awk '/^Mem:/ {print $3"/"$2}')"
interval = 5
tooltip = true

[module/window]
type = window
format = {title}

[module/tray]
type = tray
icon-size = 14
spacing = 1

[module/language]
type = custom/script
exec = if [ "$(xkb-switch)" = "ru" ]
interval = 1
format = {}

[module/weather]
type = custom/script
exec = curl -s 'wttr.in/Moscow?format=%c%t'
interval = 300
class = weather
format = " {} "

[module/pulseaudio]
type = custom/script
exec = echo "üîä $(wpctl get-volume @DEFAULT_AUDIO_SINK@ | awk '{print int($2*100)}')%"
interval = 2
on-click = "pavucontrol"
on-scroll-up = "wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 2%+"
on-scroll-down = "wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 2%-"

[module/battery]
type = battery
format = "{icon} {capacity}%"
format-charging = "Ôá¶ {capacity}%"
format-alt = "{time} {icon}"
format-icons = ["ÔâÑ", "ÔâÉ", "ÔâÇ", "ÔâÅ", "ÔâÄ"]
states = {
    warning = 30,
    critical = 1
}

[module/clock]
type = clock
format = "{:%d.%m.%Y - %H:%M}"
format-alt = "{:%A, %B %d at %R}"

[module/quick-settings]
type = custom/script
exec = echo "‚öôÔ∏è"
interval = 5
on-click = "hyprpanel --toggle-quick-settings"
tooltip = "Quick Settings"

[quick-settings]
position = top-right
width = 320
height = 400
modules = [
    "wifi-toggle",
    "bluetooth-toggle", 
    "vpn-toggle",
    "airplane-toggle",
    "volume-slider",
    "brightness-slider"
]

[module/wifi-toggle]
type = custom/script
exec = if nmcli radio wifi | grep -qi enabled
interval = 5
on-click = "~/.local/bin/qs-toggle wifi"

[module/bluetooth-toggle]
type = custom/script
exec = if bluetoothctl show | grep -q "Powered: yes"
interval = 5
on-click = "~/.local/bin/qs-toggle bluetooth"

[module/vpn-toggle]
type = custom/script
exec = if nmcli -t -f TYPE connection show --active | grep -q '^vpn$'
interval = 5
on-click = "~/.local/bin/qs-toggle vpn"

[module/airplane-toggle]
type = custom/script
exec = echo "‚úàÔ∏è Airplane"
interval = 5
on-click = "~/.local/bin/qs-toggle airplane"

[module/volume-slider]
type = custom/script
exec = echo "üîä $(wpctl get-volume @DEFAULT_AUDIO_SINK@ | awk '{print int($2*100)}')%"
interval = 2
on-change = "~/.local/bin/volume-set {}"

[module/brightness-slider]
type = custom/script
exec = echo "‚òÄÔ∏è $(brightnessctl i | awk '/Current/ {print $4}' | tr -d '()%')%"
interval = 3
on-change = "~/.local/bin/brightness-set {}"
